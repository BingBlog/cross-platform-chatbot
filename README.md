# è·¨å¹³å° AI Chatbot é¡¹ç›®

åŸºäºå¤§æ¨¡å‹çš„æ™ºèƒ½èŠå¤©æœºå™¨äººï¼Œæ”¯æŒå¤šå¹³å°éƒ¨ç½²ï¼Œæä¾›å®Œæ•´çš„å¯¹è¯ä½“éªŒå’Œä¼šè¯ç®¡ç†åŠŸèƒ½ã€‚

## é¡¹ç›®ç›®çš„

å­¦ä¹ è·¨å¹³å°å¼€å‘æŠ€æœ¯ï¼ŒæŒæ¡ä¸åŒå¹³å°çš„åº”ç”¨å¼€å‘æ–¹æ³•å’Œæœ€ä½³å®è·µã€‚

## æ–‡æ¡£ç»“æ„

### ğŸ“‹ [éœ€æ±‚æ–‡æ¡£](docs/requirement.md)

é¡¹ç›®éœ€æ±‚æ–‡æ¡£ç´¢å¼•ï¼ŒåŒ…å«å®Œæ•´çš„é¡¹ç›®æ¦‚è¿°å’Œæ–‡æ¡£ç»“æ„è¯´æ˜ã€‚

### ğŸ“‹ [å­¦ä¹ è®¡åˆ’](docs/learning-plan.md)

å®Œæ•´çš„å­¦ä¹ è·¯å¾„è§„åˆ’ï¼ŒåŒ…å« 4 ä¸ªé˜¶æ®µçš„å­¦ä¹ é‡ç‚¹å’Œè¿›åº¦è·Ÿè¸ªã€‚

### ğŸ¯ [P0 - æ ¸å¿ƒå­¦ä¹ ç›®æ ‡](docs/requirements/p0-core-requirements.md)

æ¡Œé¢åº”ç”¨å’Œç§»åŠ¨ç«¯ Android å¼€å‘çš„æ ¸å¿ƒåŠŸèƒ½ï¼Œé‡ç‚¹å…³æ³¨ï¼š

- èŠå¤©åŠŸèƒ½ï¼ˆåŸºç¡€å¯¹è¯ã€æ¶ˆæ¯ç±»å‹ï¼‰
- ä¼šè¯ç®¡ç†åŠŸèƒ½
- ç”¨æˆ·è®¤è¯ä¸æƒé™
- ä¸ªæ€§åŒ–è®¾ç½®
- æ€§èƒ½ä¸ä½“éªŒ
- è·¨å¹³å°æ”¯æŒï¼ˆWindowsã€macOSã€Androidï¼‰

### ğŸ”§ [P1 - é‡è¦å­¦ä¹ å†…å®¹](docs/requirements/p1-important-requirements.md)

æ¡Œé¢å’Œç§»åŠ¨ç«¯å¼€å‘çš„å…³é”®æŠ€æœ¯ï¼š

- æƒé™æ§åˆ¶
- AI æ¨¡å‹è®¾ç½®
- æ™ºèƒ½åŠŸèƒ½
- iOS åº”ç”¨å¼€å‘

### ğŸš€ [P2 - è¿›é˜¶å­¦ä¹ å†…å®¹](docs/requirements/p2-advanced-requirements.md)

è·¨å¹³å°å¼€å‘çš„é«˜çº§ç‰¹æ€§ï¼š

- é«˜çº§äº¤äº’åŠŸèƒ½
- åä½œåŠŸèƒ½å’Œç¤¾äº¤ç‰¹æ€§
- æ€§èƒ½ä¼˜åŒ–å’Œå®‰å…¨æœºåˆ¶
- ç›‘æ§å’Œåˆ†æåŠŸèƒ½

## å­¦ä¹ é‡ç‚¹

- **æ¡Œé¢åº”ç”¨ç‰¹æ€§**ï¼šç³»ç»Ÿé›†æˆã€å¿«æ·é”®ã€æ‹–æ‹½ç­‰
- **ç§»åŠ¨åº”ç”¨ç‰¹æ€§**ï¼šæ‰‹åŠ¿ã€è§¦æ‘¸ã€ä¼ æ„Ÿå™¨ç­‰
- **å¹³å°å·®å¼‚**ï¼šä¸åŒå¹³å°çš„äº¤äº’æ¨¡å¼å’Œè®¾è®¡è§„èŒƒ
- **ä»£ç å¤ç”¨**ï¼šæ¡Œé¢å’Œç§»åŠ¨ç«¯ä¹‹é—´çš„ä»£ç å¤ç”¨ç­–ç•¥
- **æ€§èƒ½ä¼˜åŒ–**ï¼šå„å¹³å°çš„æ€§èƒ½ä¼˜åŒ–æŠ€å·§

## é¡¹ç›®ç»“æ„

```
cross-platform-chatbot/
â”œâ”€â”€ README.md                    # é¡¹ç›®è¯´æ˜
â”œâ”€â”€ docs/                        # æ–‡æ¡£ç›®å½•
â”‚   â”œâ”€â”€ requirement.md           # éœ€æ±‚æ–‡æ¡£ç´¢å¼•
â”‚   â”œâ”€â”€ learning-plan.md         # å­¦ä¹ è®¡åˆ’
â”‚   â”œâ”€â”€ architecture/            # æ¶æ„æ–‡æ¡£
â”‚   â”‚   â””â”€â”€ independent-packages.md # ç‹¬ç«‹åŒ…æ¶æ„è¯´æ˜
â”‚   â””â”€â”€ requirements/            # éœ€æ±‚æ–‡æ¡£ç›®å½•
â”‚       â”œâ”€â”€ p0-core-requirements.md  # P0æ ¸å¿ƒå­¦ä¹ ç›®æ ‡
â”‚       â”œâ”€â”€ p1-important-requirements.md # P1é‡è¦å­¦ä¹ å†…å®¹
â”‚       â””â”€â”€ p2-advanced-requirements.md  # P2è¿›é˜¶å­¦ä¹ å†…å®¹
â”œâ”€â”€ packages/                    # å®Œå…¨ç‹¬ç«‹çš„å­åŒ…ç›®å½•
â”‚   â”œâ”€â”€ backend/                 # åç«¯æœåŠ¡ (Node.js + Koa) - å®Œå…¨ç‹¬ç«‹
â”‚   â”œâ”€â”€ web/                     # React Webåº”ç”¨ - å®Œå…¨ç‹¬ç«‹
â”‚   â”œâ”€â”€ desktop/                 # Electronæ¡Œé¢åº”ç”¨ - å®Œå…¨ç‹¬ç«‹
â”‚   â”œâ”€â”€ shared/                  # è·¨å¹³å°é€šç”¨å…±äº«åº“ (å¯é€‰)
â”‚   â”œâ”€â”€ mobile-expo/             # Expoç§»åŠ¨åº”ç”¨ (React Native 0.81.4) - å®Œå…¨ç‹¬ç«‹
â”‚   â”œâ”€â”€ mobile-native/           # åŸç”Ÿç§»åŠ¨åº”ç”¨ (React Native 0.72.7) - å®Œå…¨ç‹¬ç«‹
â”‚   â””â”€â”€ mobile-shared/           # ç§»åŠ¨ç«¯ä¸“ç”¨å…±äº«åº“ (å¯é€‰)
â”œâ”€â”€ scripts/                     # ç®¡ç†è„šæœ¬
â”‚   â””â”€â”€ manage-packages.sh       # ç‹¬ç«‹åŒ…ç®¡ç†è„šæœ¬
â””â”€â”€ pnpm-workspace.yaml          # pnpmå·¥ä½œç©ºé—´é…ç½®
```

## ğŸ¯ å®Œå…¨ç‹¬ç«‹çš„åŒ…æ¶æ„

æœ¬é¡¹ç›®é‡‡ç”¨**å®Œå…¨ç‹¬ç«‹çš„å­åŒ…æ¶æ„**ï¼Œæ¯ä¸ªåŒ…éƒ½å¯ä»¥ç‹¬ç«‹å¼€å‘ã€æ„å»ºå’Œéƒ¨ç½²ï¼š

### ç‹¬ç«‹åŒ…ç‰¹æ€§

- âœ… **ç‹¬ç«‹ä¾èµ–ç®¡ç†**: æ¯ä¸ªåŒ…æœ‰è‡ªå·±çš„ `package.json` å’Œ `node_modules`
- âœ… **ç‹¬ç«‹æ„å»ºç³»ç»Ÿ**: æ¯ä¸ªåŒ…æœ‰è‡ªå·±çš„æ„å»ºé…ç½®å’Œè¾“å‡º
- âœ… **ç‹¬ç«‹å¼€å‘ç¯å¢ƒ**: æ¯ä¸ªåŒ…å¯ä»¥ç‹¬ç«‹å¯åŠ¨å¼€å‘æœåŠ¡å™¨
- âœ… **ç‹¬ç«‹éƒ¨ç½²æµç¨‹**: æ¯ä¸ªåŒ…å¯ä»¥ç‹¬ç«‹éƒ¨ç½²å’Œå›æ»š
- âœ… **ç‹¬ç«‹ç‰ˆæœ¬ç®¡ç†**: æ¯ä¸ªåŒ…ç‹¬ç«‹ç®¡ç†ç‰ˆæœ¬å·

### åŒ…ç®¡ç†å·¥å…·

ä½¿ç”¨ `scripts/manage-packages.sh` è„šæœ¬ç®¡ç†æ‰€æœ‰åŒ…ï¼š

```bash
# æŸ¥çœ‹æ‰€æœ‰åŒ…
./scripts/manage-packages.sh list

# å®‰è£…ç‰¹å®šåŒ…ä¾èµ–
./scripts/manage-packages.sh install mobile-expo

# å¯åŠ¨ç‰¹å®šåŒ…å¼€å‘æœåŠ¡å™¨
./scripts/manage-packages.sh dev web

# æ„å»ºæ‰€æœ‰åŒ…
./scripts/manage-packages.sh build-all

# æŸ¥çœ‹åŒ…çŠ¶æ€
./scripts/manage-packages.sh status
```

### ç‹¬ç«‹å¼€å‘å·¥ä½œæµ

```bash
# æ–¹å¼1: ä½¿ç”¨ç®¡ç†è„šæœ¬
./scripts/manage-packages.sh dev mobile-expo

# æ–¹å¼2: ç›´æ¥è¿›å…¥åŒ…ç›®å½•
cd packages/mobile-expo
pnpm install
pnpm start

# æ–¹å¼3: ä»æ ¹ç›®å½•ä½¿ç”¨pnpm filter
pnpm --filter @chatbot/mobile-expo start
```

## å¼€å§‹å­¦ä¹ 

1. é¦–å…ˆé˜…è¯» [éœ€æ±‚æ–‡æ¡£](docs/requirement.md) äº†è§£é¡¹ç›®æ¦‚è¿°
2. æŸ¥çœ‹ [å­¦ä¹ è®¡åˆ’](docs/learning-plan.md) åˆ¶å®šå­¦ä¹ è·¯å¾„
3. ä» [P0 æ ¸å¿ƒå­¦ä¹ ç›®æ ‡](docs/requirements/p0-core-requirements.md) å¼€å§‹å®ç°
4. é€æ­¥æ‰©å±•åˆ° [P1](docs/requirements/p1-important-requirements.md) å’Œ [P2](docs/requirements/p2-advanced-requirements.md) åŠŸèƒ½

## æŠ€æœ¯æ ˆ

- **åç«¯æœåŠ¡**ï¼šNode.js + Koa.js + TypeScript
- **æ•°æ®åº“**ï¼šPostgreSQL + Redis + Prisma ORM
- **Webåº”ç”¨**ï¼šReact 18 + TypeScript + Tailwind CSS
- **æ¡Œé¢åº”ç”¨**ï¼šElectron + React
- **ç§»åŠ¨åº”ç”¨**ï¼š
  - **Expoå¼€å‘**ï¼šReact Native 0.81.4 + Expo SDK 54
  - **åŸç”Ÿå¼€å‘**ï¼šReact Native 0.72.7 + Android/iOSåŸç”Ÿé›†æˆ
- **AIæ¨¡å‹**ï¼šQWEN APIé›†æˆ
- **çŠ¶æ€ç®¡ç†**ï¼šZustand + React Query
- **æ„å»ºå·¥å…·**ï¼špnpm workspace + TypeScript

## å…±äº«åº“æ¶æ„

### ğŸ¯ `@chatbot/shared` - è·¨å¹³å°é€šç”¨å…±äº«åº“

**å®šä½**ï¼šè·¨å¹³å°é€šç”¨ä»£ç ï¼Œæ”¯æŒWebã€Desktopã€Mobileçš„80%+ä»£ç å¤ç”¨

**ç‰¹ç‚¹**ï¼š
- âœ… **è·¨å¹³å°å…¼å®¹**ï¼šä½¿ç”¨Webæ ‡å‡†APIï¼ˆDOMã€CSSç±»åï¼‰
- âœ… **å®Œæ•´æ¶æ„**ï¼šåŒ…å«å®Œæ•´çš„ä¸šåŠ¡é€»è¾‘ã€çŠ¶æ€ç®¡ç†ã€APIå®¢æˆ·ç«¯
- âœ… **æ„å»ºè¾“å‡º**ï¼šç¼–è¯‘ä¸º`dist/`ç›®å½•ï¼Œå¯è¢«å…¶ä»–å¹³å°å¼•ç”¨
- âœ… **ä¸°å¯ŒåŠŸèƒ½**ï¼šAIé›†æˆã€ç”¨æˆ·ç®¡ç†ã€ä¼šè¯ç®¡ç†ã€å®Œæ•´UIç»„ä»¶åº“

**å†…å®¹ç»“æ„**ï¼š
```
@chatbot/shared/
â”œâ”€â”€ business/          # ä¸šåŠ¡é€»è¾‘å±‚
â”œâ”€â”€ models/           # æ•°æ®æ¨¡å‹
â”œâ”€â”€ api/              # APIå®¢æˆ·ç«¯
â”œâ”€â”€ ai/               # AIé›†æˆæœåŠ¡
â”œâ”€â”€ state/            # çŠ¶æ€ç®¡ç† (Zustand)
â”œâ”€â”€ components/       # UIç»„ä»¶ (Webæ ‡å‡†)
â”œâ”€â”€ adapters/         # å¹³å°é€‚é…å™¨
â”œâ”€â”€ utils/            # å·¥å…·å‡½æ•°
â””â”€â”€ types/            # TypeScriptç±»å‹
```

**ä½¿ç”¨åœºæ™¯**ï¼š
- Webåº”ç”¨ (`packages/web/`)
- Desktopåº”ç”¨ (`packages/desktop/`)
- ä½œä¸ºåŸºç¡€åº“è¢«å…¶ä»–å¹³å°å¼•ç”¨

### ğŸ“± `@chatbot/mobile-shared` - ç§»åŠ¨ç«¯ä¸“ç”¨å…±äº«åº“

**å®šä½**ï¼šç§»åŠ¨ç«¯ä¸“ç”¨ä»£ç ï¼Œä¸“é—¨ä¸ºReact Nativeç¯å¢ƒè®¾è®¡

**ç‰¹ç‚¹**ï¼š
- âœ… **React Nativeä¸“ç”¨**ï¼šä½¿ç”¨React Nativeç»„ä»¶ï¼ˆViewã€Textã€StyleSheetï¼‰
- âœ… **è½»é‡çº§**ï¼šåªåŒ…å«ç§»åŠ¨ç«¯å¿…éœ€çš„ç»„ä»¶å’Œå·¥å…·
- âœ… **ç›´æ¥å¼•ç”¨**ï¼šTypeScriptæºç ç›´æ¥å¼•ç”¨ï¼Œæ— éœ€æ„å»º
- âœ… **ç§»åŠ¨ä¼˜åŒ–**ï¼šé’ˆå¯¹ç§»åŠ¨ç«¯äº¤äº’å’Œæ€§èƒ½ä¼˜åŒ–

**å†…å®¹ç»“æ„**ï¼š
```
@chatbot/mobile-shared/
â”œâ”€â”€ components/       # React Nativeç»„ä»¶
â”œâ”€â”€ hooks/           # React Native Hooks
â”œâ”€â”€ types/           # ç§»åŠ¨ç«¯ç±»å‹å®šä¹‰
â””â”€â”€ utils/           # ç§»åŠ¨ç«¯å·¥å…·å‡½æ•°
```

**ä½¿ç”¨åœºæ™¯**ï¼š
- Expoåº”ç”¨ (`packages/mobile-expo/`)
- åŸç”Ÿåº”ç”¨ (`packages/mobile-native/`)

### ğŸ”„ å…±äº«åº“å…³ç³»

| ç‰¹æ€§ | `@chatbot/shared` | `@chatbot/mobile-shared` |
|------|-------------------|--------------------------|
| **å¹³å°** | è·¨å¹³å° (Web/Desktop/Mobile) | ç§»åŠ¨ç«¯ä¸“ç”¨ |
| **ç»„ä»¶** | `<div>`, `<span>`, CSSç±»å | `<View>`, `<Text>`, StyleSheet |
| **æ„å»º** | ç¼–è¯‘ä¸ºdist/ | ç›´æ¥TypeScriptæºç  |
| **ä¾èµ–** | React + React-DOM | React + React-Native |
| **å¤æ‚åº¦** | å®Œæ•´ä¸šåŠ¡é€»è¾‘ | è½»é‡çº§ç»„ä»¶åº“ |

## å¼€å‘å‘½ä»¤

```bash
# å®‰è£…ä¾èµ–
pnpm install

# å¼€å‘æ¨¡å¼
pnpm dev:web          # å¯åŠ¨Webåº”ç”¨
pnpm dev:desktop      # å¯åŠ¨æ¡Œé¢åº”ç”¨
pnpm dev:mobile-expo  # å¯åŠ¨Expoç§»åŠ¨åº”ç”¨
pnpm dev:mobile-native # å¯åŠ¨åŸç”Ÿç§»åŠ¨åº”ç”¨
pnpm dev:backend      # å¯åŠ¨åç«¯æœåŠ¡

# æ„å»º
pnpm build:web        # æ„å»ºWebåº”ç”¨
pnpm build:desktop    # æ„å»ºæ¡Œé¢åº”ç”¨
pnpm build:mobile-expo # æ„å»ºExpoåº”ç”¨
pnpm build:mobile-native # æ„å»ºåŸç”Ÿåº”ç”¨
pnpm build:backend    # æ„å»ºåç«¯æœåŠ¡

# æµ‹è¯•
pnpm test            # è¿è¡Œæ‰€æœ‰æµ‹è¯•
pnpm lint            # ä»£ç æ£€æŸ¥
pnpm type-check      # ç±»å‹æ£€æŸ¥
```
