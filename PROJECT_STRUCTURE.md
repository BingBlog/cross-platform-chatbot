# é¡¹ç›®ç»“æ„æ¦‚è§ˆ

## ğŸ“ å®Œæ•´ç›®å½•ç»“æ„

```
cross-platform-chatbot/
â”œâ”€â”€ ğŸ“„ package.json                    # æ ¹åŒ…é…ç½®ï¼Œworkspace ç®¡ç†
â”œâ”€â”€ ğŸ“„ tsconfig.json                   # æ ¹ TypeScript é…ç½®
â”œâ”€â”€ ğŸ“„ .gitignore                      # Git å¿½ç•¥æ–‡ä»¶
â”œâ”€â”€ ğŸ“„ env.example                     # ç¯å¢ƒå˜é‡æ¨¡æ¿
â”œâ”€â”€ ğŸ“„ PROJECT_STRUCTURE.md            # é¡¹ç›®ç»“æ„è¯´æ˜
â”œâ”€â”€ ğŸ“„ .cursorrules                    # Cursor Rules é…ç½®
â”œâ”€â”€ ğŸ“„ README.md                       # é¡¹ç›®è¯´æ˜
â”‚
â”œâ”€â”€ ğŸ“ docs/                           # æ–‡æ¡£ç›®å½•
â”‚   â”œâ”€â”€ ğŸ“ architecture/               # æ¶æ„æ–‡æ¡£
â”‚   â”œâ”€â”€ ğŸ“ cursor-rules/               # Cursor Rules è¯¦ç»†æ–‡æ¡£
â”‚   â”œâ”€â”€ ğŸ“ requirements/               # éœ€æ±‚æ–‡æ¡£
â”‚   â”œâ”€â”€ ğŸ“ tech-stack/                 # æŠ€æœ¯æ ˆé€‰æ‹©æ–‡æ¡£
â”‚   â””â”€â”€ ğŸ“„ ...                         # å…¶ä»–æ–‡æ¡£
â”‚
â””â”€â”€ ğŸ“ packages/                       # åŒ…ç›®å½•
    â”œâ”€â”€ ğŸ“ shared/                     # å…±äº«ä»£ç åŒ… (80%+ å¤ç”¨)
    â”‚   â”œâ”€â”€ ğŸ“„ package.json            # å…±äº«åŒ…é…ç½®
    â”‚   â”œâ”€â”€ ğŸ“„ tsconfig.json           # TypeScript é…ç½®
    â”‚   â””â”€â”€ ğŸ“ src/                    # æºä»£ç 
    â”‚       â”œâ”€â”€ ğŸ“„ index.ts            # å…¥å£æ–‡ä»¶
    â”‚       â”œâ”€â”€ ğŸ“ business/           # ä¸šåŠ¡é€»è¾‘
    â”‚       â”œâ”€â”€ ğŸ“ models/             # æ•°æ®æ¨¡å‹
    â”‚       â”œâ”€â”€ ğŸ“ api/                # API å®¢æˆ·ç«¯
    â”‚       â”œâ”€â”€ ğŸ“ ai/                 # AI é›†æˆ
    â”‚       â”œâ”€â”€ ğŸ“ state/              # çŠ¶æ€ç®¡ç†
    â”‚       â”œâ”€â”€ ğŸ“ components/         # UI ç»„ä»¶
    â”‚       â”‚   â”œâ”€â”€ ğŸ“ atoms/          # åŸå­ç»„ä»¶
    â”‚       â”‚   â”œâ”€â”€ ğŸ“ molecules/      # åˆ†å­ç»„ä»¶
    â”‚       â”‚   â”œâ”€â”€ ğŸ“ organisms/      # æœ‰æœºä½“ç»„ä»¶
    â”‚       â”‚   â””â”€â”€ ğŸ“ templates/      # æ¨¡æ¿ç»„ä»¶
    â”‚       â”œâ”€â”€ ğŸ“ utils/              # å·¥å…·å‡½æ•°
    â”‚       â”œâ”€â”€ ğŸ“ adapters/           # å¹³å°é€‚é…å™¨
    â”‚       â””â”€â”€ ğŸ“ types/              # ç±»å‹å®šä¹‰
    â”‚
    â”œâ”€â”€ ğŸ“ desktop/                    # æ¡Œé¢åº”ç”¨ (Electron)
    â”‚   â”œâ”€â”€ ğŸ“„ package.json            # æ¡Œé¢åº”ç”¨é…ç½®
    â”‚   â”œâ”€â”€ ğŸ“„ tsconfig.json           # ä¸»è¿›ç¨‹ TypeScript é…ç½®
    â”‚   â”œâ”€â”€ ğŸ“„ tsconfig.main.json      # æ¸²æŸ“è¿›ç¨‹ TypeScript é…ç½®
    â”‚   â””â”€â”€ ğŸ“ src/                    # æºä»£ç 
    â”‚       â”œâ”€â”€ ğŸ“ main/               # ä¸»è¿›ç¨‹
    â”‚       â”‚   â”œâ”€â”€ ğŸ“„ main.ts         # ä¸»è¿›ç¨‹å…¥å£
    â”‚       â”‚   â””â”€â”€ ğŸ“„ preload.ts      # é¢„åŠ è½½è„šæœ¬
    â”‚       â””â”€â”€ ğŸ“ renderer/           # æ¸²æŸ“è¿›ç¨‹
    â”‚           â”œâ”€â”€ ğŸ“ components/     # React ç»„ä»¶
    â”‚           â”œâ”€â”€ ğŸ“ pages/          # é¡µé¢ç»„ä»¶
    â”‚           â”œâ”€â”€ ğŸ“ hooks/          # React Hooks
    â”‚           â””â”€â”€ ğŸ“ utils/          # å·¥å…·å‡½æ•°
    â”‚
    â”œâ”€â”€ ğŸ“ mobile/                     # ç§»åŠ¨åº”ç”¨ (React Native)
    â”‚   â”œâ”€â”€ ğŸ“„ package.json            # ç§»åŠ¨åº”ç”¨é…ç½®
    â”‚   â”œâ”€â”€ ğŸ“„ tsconfig.json           # TypeScript é…ç½®
    â”‚   â”œâ”€â”€ ğŸ“„ babel.config.js         # Babel é…ç½®
    â”‚   â”œâ”€â”€ ğŸ“„ metro.config.js         # Metro é…ç½®
    â”‚   â”œâ”€â”€ ğŸ“„ app.json                # åº”ç”¨é…ç½®
    â”‚   â”œâ”€â”€ ğŸ“„ index.js                # åº”ç”¨å…¥å£
    â”‚   â””â”€â”€ ğŸ“ src/                    # æºä»£ç 
    â”‚       â”œâ”€â”€ ğŸ“„ App.tsx             # åº”ç”¨æ ¹ç»„ä»¶
    â”‚       â”œâ”€â”€ ğŸ“ components/         # React Native ç»„ä»¶
    â”‚       â”œâ”€â”€ ğŸ“ screens/            # å±å¹•ç»„ä»¶
    â”‚       â”œâ”€â”€ ğŸ“ navigation/         # å¯¼èˆªé…ç½®
    â”‚       â”œâ”€â”€ ğŸ“ hooks/              # React Hooks
    â”‚       â”œâ”€â”€ ğŸ“ utils/              # å·¥å…·å‡½æ•°
    â”‚       â””â”€â”€ ğŸ“ services/           # æœåŠ¡å±‚
    â”‚
    â”œâ”€â”€ ğŸ“ web/                        # Web åº”ç”¨ (React)
    â”‚   â”œâ”€â”€ ğŸ“„ package.json            # Web åº”ç”¨é…ç½®
    â”‚   â”œâ”€â”€ ğŸ“„ tsconfig.json           # TypeScript é…ç½®
    â”‚   â”œâ”€â”€ ğŸ“„ vite.config.ts          # Vite é…ç½®
    â”‚   â”œâ”€â”€ ğŸ“„ tailwind.config.js      # Tailwind CSS é…ç½®
    â”‚   â”œâ”€â”€ ğŸ“„ postcss.config.js       # PostCSS é…ç½®
    â”‚   â”œâ”€â”€ ğŸ“„ index.html              # HTML æ¨¡æ¿
    â”‚   â””â”€â”€ ğŸ“ src/                    # æºä»£ç 
    â”‚       â”œâ”€â”€ ğŸ“„ main.tsx            # åº”ç”¨å…¥å£
    â”‚       â”œâ”€â”€ ğŸ“„ App.tsx             # åº”ç”¨æ ¹ç»„ä»¶
    â”‚       â”œâ”€â”€ ğŸ“„ index.css           # å…¨å±€æ ·å¼
    â”‚       â”œâ”€â”€ ğŸ“ components/         # React ç»„ä»¶
    â”‚       â”œâ”€â”€ ğŸ“ pages/              # é¡µé¢ç»„ä»¶
    â”‚       â”œâ”€â”€ ğŸ“ hooks/              # React Hooks
    â”‚       â”œâ”€â”€ ğŸ“ utils/              # å·¥å…·å‡½æ•°
    â”‚       â”œâ”€â”€ ğŸ“ services/           # æœåŠ¡å±‚
    â”‚       â””â”€â”€ ğŸ“ assets/             # é™æ€èµ„æº
    â”‚
    â””â”€â”€ ğŸ“ backend/                    # åç«¯æœåŠ¡ (Node.js + Koa)
        â”œâ”€â”€ ğŸ“„ package.json            # åç«¯æœåŠ¡é…ç½®
        â”œâ”€â”€ ğŸ“„ tsconfig.json           # TypeScript é…ç½®
        â””â”€â”€ ğŸ“ src/                    # æºä»£ç 
        â”‚   â”œâ”€â”€ ğŸ“„ index.ts            # æœåŠ¡å…¥å£
        â”‚   â”œâ”€â”€ ğŸ“ controllers/        # æ§åˆ¶å™¨
        â”‚   â”œâ”€â”€ ğŸ“ services/           # æœåŠ¡å±‚
        â”‚   â”œâ”€â”€ ğŸ“ middleware/         # ä¸­é—´ä»¶
        â”‚   â”œâ”€â”€ ğŸ“ utils/              # å·¥å…·å‡½æ•°
        â”‚   â””â”€â”€ ğŸ“ types/              # ç±»å‹å®šä¹‰
        â””â”€â”€ ğŸ“ prisma/                 # æ•°æ®åº“é…ç½®
            â””â”€â”€ ğŸ“„ schema.prisma       # Prisma æ•°æ®æ¨¡å‹
```

## ğŸ¯ æ ¸å¿ƒç‰¹æ€§

### âœ… å·²å®Œæˆçš„åŸºç¡€æ¶æ„

1. **Monorepo å·¥ä½œç©ºé—´é…ç½®**
   - ä½¿ç”¨ pnpm workspaces ç®¡ç†å¤šåŒ…é¡¹ç›®
   - ç»Ÿä¸€çš„ä¾èµ–ç®¡ç†å’Œè„šæœ¬å‘½ä»¤
   - åŒ…ä¹‹é—´çš„ä¾èµ–å…³ç³»é…ç½®

2. **TypeScript é…ç½®**
   - æ ¹é…ç½®å’ŒåŒ…ç‰¹å®šé…ç½®
   - è·¯å¾„åˆ«åé…ç½®
   - é¡¹ç›®å¼•ç”¨ (Project References) é…ç½®

3. **è·¨å¹³å°åŒ…ç»“æ„**
   - **shared**: 80%+ ä»£ç å¤ç”¨çš„å…±äº«åŒ…
   - **desktop**: Electron æ¡Œé¢åº”ç”¨
   - **mobile**: React Native ç§»åŠ¨åº”ç”¨
   - **web**: React Web åº”ç”¨
   - **backend**: Node.js + Koa åç«¯æœåŠ¡

4. **å¼€å‘å·¥å…·é…ç½®**
   - Vite (Web åº”ç”¨æ„å»ºå·¥å…·)
   - Metro (React Native æ„å»ºå·¥å…·)
   - Electron Builder (æ¡Œé¢åº”ç”¨æ‰“åŒ…)
   - Prisma (æ•°æ®åº“ ORM)

5. **ç¯å¢ƒé…ç½®**
   - ç¯å¢ƒå˜é‡æ¨¡æ¿
   - Git å¿½ç•¥æ–‡ä»¶
   - æ„å»ºé…ç½®æ–‡ä»¶

## ğŸš€ ä¸‹ä¸€æ­¥è®¡åˆ’

### å³å°†å¼€å§‹çš„åŠŸèƒ½å¼€å‘

1. **å¼€å‘å·¥å…·é“¾é…ç½®** (P0)
   - ESLint é…ç½®
   - Prettier é…ç½®
   - Husky é¢„æäº¤é’©å­
   - æµ‹è¯•æ¡†æ¶é…ç½®

2. **æ•°æ®åº“å’ŒAIæœåŠ¡é…ç½®** (P0)
   - Prisma æ•°æ®åº“è¿ç§»
   - QWEN API é›†æˆ
   - Redis ç¼“å­˜é…ç½®

3. **P0 æ ¸å¿ƒåŠŸèƒ½å¼€å‘**
   - ç”¨æˆ·è®¤è¯ç³»ç»Ÿ
   - èŠå¤©åŠŸèƒ½å®ç°
   - ä¼šè¯ç®¡ç†
   - åŸºç¡€ UI ç»„ä»¶

## ğŸ“‹ å¼€å‘å‘½ä»¤

```bash
# å®‰è£…ä¾èµ–
pnpm install

# å¼€å‘æ¨¡å¼ (æ‰€æœ‰æœåŠ¡)
pnpm dev

# å•ç‹¬å¯åŠ¨æœåŠ¡
pnpm dev:web        # Web åº”ç”¨
pnpm dev:desktop    # æ¡Œé¢åº”ç”¨
pnpm dev:mobile     # ç§»åŠ¨åº”ç”¨
pnpm dev:backend    # åç«¯æœåŠ¡

# æ„å»ºæ‰€æœ‰åŒ…
pnpm build

# ç±»å‹æ£€æŸ¥
pnpm type-check

# æµ‹è¯•
pnpm test
```

## ğŸ¨ æ¶æ„ä¼˜åŠ¿

1. **é«˜ä»£ç å¤ç”¨**: 80%+ ä»£ç åœ¨ shared åŒ…ä¸­å…±äº«
2. **ç±»å‹å®‰å…¨**: å…¨é¡¹ç›® TypeScript æ”¯æŒ
3. **å¼€å‘æ•ˆç‡**: ç»Ÿä¸€çš„å¼€å‘å·¥å…·é“¾å’Œè„šæœ¬
4. **å¯ç»´æŠ¤æ€§**: æ¸…æ™°çš„åŒ…ç»“æ„å’Œä¾èµ–å…³ç³»
5. **å¯æ‰©å±•æ€§**: æ¨¡å—åŒ–è®¾è®¡ï¼Œæ˜“äºæ·»åŠ æ–°åŠŸèƒ½

é¡¹ç›®åŸºç¡€æ¶æ„å·²å®Œå…¨æ­å»ºå®Œæˆï¼Œå¯ä»¥å¼€å§‹è¿›è¡Œå…·ä½“çš„åŠŸèƒ½å¼€å‘äº†ï¼
